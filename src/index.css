/* src/index.css */

@import "tailwindcss"; /* This must be the very first line */
@import url("https://fonts.googleapis.com/css2?family=Inter:wght@100;200;300;400;500;600;700;800;900&display=swap");

/* =============================================
   === 1. THEME & GLOBAL VARIABLES           ===
   =============================================
   All theme-specific colors and fonts are defined here as CSS Custom Properties.
   ChastityOS Design System with dark mode focus.
*/
:root,
.theme-prod {
  --font-main:
    "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    sans-serif;

  /* --- ChastityOS Dark Mode Color Palette --- */
  --color-bg-primary: #282132;
  --color-bg-secondary: #d7d2ea;
  --color-bg-tertiary: #dfdbee;
  --color-text-primary: #ffffff;
  --color-text-secondary: #d7d2ea;
  --color-text-muted: #a39fad;
  --color-text-accent: #581c87;
  --color-border-primary: #000000;
  --color-border-accent: #581c87;
  --color-button-bg: #581c87;
  --color-button-bg-hover: #7f28c1;
  --color-button-text: #ffffff;
  --color-accent-orange: #e88331;
  --color-accent-purple: #581c87;
  --color-focus-ring: #47166c;

  /* --- Mobile-First Design Tokens --- */
  --touch-target-min: 44px;
  --mobile-spacing-xs: 0.25rem;
  --mobile-spacing-sm: 0.5rem;
  --mobile-spacing-md: 1rem;
  --mobile-spacing-lg: 1.5rem;
  --mobile-spacing-xl: 2rem;

  /* Fluid Typography */
  --font-size-xs: clamp(0.75rem, 0.7rem + 0.25vw, 0.8rem);
  --font-size-sm: clamp(0.875rem, 0.8rem + 0.375vw, 0.9rem);
  --font-size-base: clamp(1rem, 0.9rem + 0.5vw, 1.125rem);
  --font-size-lg: clamp(1.125rem, 1rem + 0.625vw, 1.25rem);
  --font-size-xl: clamp(1.25rem, 1.1rem + 0.75vw, 1.5rem);
  --font-size-2xl: clamp(1.5rem, 1.3rem + 1vw, 2rem);

  /* Mobile-Safe Animations */
  --animation-duration-fast: 150ms;
  --animation-duration-normal: 300ms;
  --animation-duration-slow: 500ms;
  --animation-easing: cubic-bezier(0.4, 0, 0.2, 1);

  /* Responsive Breakpoints (for reference) */
  --breakpoint-sm: 640px; /* Mobile Large */
  --breakpoint-md: 768px; /* Tablet */
  --breakpoint-lg: 1024px; /* Desktop Small */
  --breakpoint-xl: 1280px; /* Desktop Large */
}

.theme-nightly {
  --font-main:
    "Inter", system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto,
    sans-serif;

  /* --- Nightly "Ugly" Palette Overrides --- */
  --color-bg-primary: #ff00aa; /* neon_pink */
  --color-bg-secondary: #b32066; /* deep_rose */
  --color-bg-tertiary: #b32066; /* deep_rose */
  --color-text-primary: #ffffff;
  --color-text-secondary: #ff33cc; /* hot_magenta */
  --color-text-accent: #ff33cc; /* hot_magenta */
  --color-border-primary: #7a3150; /* mauve_smudge */
  --color-border-accent: #ff33cc; /* hot_magenta */
  --color-button-bg: #ff33cc; /* hot_magenta */
  --color-button-bg-hover: #ff66d9;
  --color-button-text: #ffffff;
  --color-accent-orange: #c93f6a; /* faded_punch */
  --color-accent-purple: #ff33cc; /* hot_magenta */
  --color-focus-ring: #ff33cc; /* hot_magenta */
}

/* =============================================
   === 2. BASE & RESET STYLES                ===
   =============================================
*/
html,
body,
#root {
  @apply h-full m-0 p-0 box-border;
}
*,
::before,
::after {
  box-sizing: inherit;
}
:root {
  @apply leading-normal font-normal;
  font-size: var(--font-size-base);
  font-synthesis: none;
  text-rendering: optimizeLegibility;
  -webkit-font-smoothing: antialiased;
  -moz-osx-font-smoothing: grayscale;
  color-scheme: light dark;

  /* Mobile-first viewport handling */
  -webkit-text-size-adjust: 100%;
  -webkit-tap-highlight-color: rgba(0, 0, 0, 0);
  touch-action: manipulation;
}
.theme-prod,
.theme-nightly {
  font-family: var(--font-main), sans-serif;
  background-color: var(--color-bg-primary);
  color: var(--color-text-primary);
}

/* Environment-aware text glow colors */
.theme-prod .text-nightly-spring-green {
  color: #c8b3e0; /* lavender glow for production */
  text-shadow: 0 0 10px rgba(215, 210, 234, 0.5);
}

.theme-nightly .text-nightly-spring-green {
  color: #00ff88; /* bright spring green for nightly */
  text-shadow: 0 0 10px rgba(255, 0, 170, 0.5); /* pink glow */
}

/* Mobile-first scrolling behavior */
html {
  scroll-behavior: smooth;
}

@media (prefers-reduced-motion: reduce) {
  html {
    scroll-behavior: auto;
  }
}

/* =============================================
   === 2.5. MOBILE-FIRST UTILITIES           ===
   =============================================
*/

/* Touch-friendly interactive elements */
.bottom-nav-item {
  min-height: var(--touch-target-min);
  min-width: var(--touch-target-min);
  position: relative;
  display: flex;
  align-items: center;
  justify-content: center;
  cursor: pointer;
  transition: all var(--animation-duration-fast) var(--animation-easing);
}

/* Fluid typography */
.text-fluid-xs {
  font-size: var(--font-size-xs);
}
.text-fluid-sm {
  font-size: var(--font-size-sm);
}
.text-fluid-base {
  font-size: var(--font-size-base);
}
.text-fluid-lg {
  font-size: var(--font-size-lg);
}
.text-fluid-xl {
  font-size: var(--font-size-xl);
}
.text-fluid-2xl {
  font-size: var(--font-size-2xl);
}

/* Mobile spacing utilities */
.space-mobile-xs {
  gap: var(--mobile-spacing-xs);
}
.space-mobile-sm {
  gap: var(--mobile-spacing-sm);
}
.space-mobile-md {
  gap: var(--mobile-spacing-md);
}
.space-mobile-lg {
  gap: var(--mobile-spacing-lg);
}
.space-mobile-xl {
  gap: var(--mobile-spacing-xl);
}

.p-mobile-xs {
  padding: var(--mobile-spacing-xs);
}
.p-mobile-sm {
  padding: var(--mobile-spacing-sm);
}
.p-mobile-md {
  padding: var(--mobile-spacing-md);
}
.p-mobile-lg {
  padding: var(--mobile-spacing-lg);
}
.p-mobile-xl {
  padding: var(--mobile-spacing-xl);
}

.m-mobile-xs {
  margin: var(--mobile-spacing-xs);
}
.m-mobile-sm {
  margin: var(--mobile-spacing-sm);
}
.m-mobile-md {
  margin: var(--mobile-spacing-md);
}
.m-mobile-lg {
  margin: var(--mobile-spacing-lg);
}
.m-mobile-xl {
  margin: var(--mobile-spacing-xl);
}

/* Safe area handling for notched devices */
.safe-area-inset-top {
  padding-top: env(safe-area-inset-top);
}
.safe-area-inset-bottom {
  padding-bottom: env(safe-area-inset-bottom);
}
.safe-area-inset-left {
  padding-left: env(safe-area-inset-left);
}
.safe-area-inset-right {
  padding-right: env(safe-area-inset-right);
}
.safe-area-inset-all {
  padding: env(safe-area-inset-top) env(safe-area-inset-right)
    env(safe-area-inset-bottom) env(safe-area-inset-left);
}

/* Mobile-first responsive containers */
.container-mobile {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  padding: 0 var(--mobile-spacing-md);
}

@media (min-width: 640px) {
  .container-mobile {
    max-width: 640px;
    padding: 0 var(--mobile-spacing-lg);
  }
}

@media (min-width: 768px) {
  .container-mobile {
    max-width: 768px;
  }
}

@media (min-width: 1024px) {
  .container-mobile {
    max-width: 1024px;
  }
}

/* Mobile-optimized cards */
.card-mobile {
  background-color: var(--color-bg-secondary);
  border: 1px solid var(--color-border-primary);
  border-radius: 1rem;
  padding: var(--mobile-spacing-lg);
  color: var(--color-text-primary);
  box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  transition: all var(--animation-duration-normal) var(--animation-easing);
}

.card-mobile:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(0, 0, 0, 0.15);
}

/* Mobile navigation patterns */
.bottom-nav {
  position: fixed;
  bottom: 0;
  left: 0;
  right: 0;
  z-index: 50;
  background: rgba(40, 33, 50, 0.95);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border-top: 1px solid var(--color-border-accent);
  padding: var(--mobile-spacing-sm) var(--mobile-spacing-md);
  padding-bottom: calc(var(--mobile-spacing-sm) + env(safe-area-inset-bottom));
}

.bottom-nav-item {
  flex-direction: column;
  gap: 0.25rem;
  padding: 0.5rem;
  border-radius: 0.5rem;
  color: var(--color-text-muted);
  text-decoration: none;
  font-size: var(--font-size-xs);
  font-weight: 500;
}

.bottom-nav-item.active {
  background-color: var(--color-button-bg);
  color: var(--color-button-text);
  transform: translateY(-2px);
}

.bottom-nav-item:hover:not(.active) {
  background-color: rgba(255, 255, 255, 0.1);
  color: var(--color-text-secondary);
}

/* Pull-to-refresh indicator */
.pull-refresh-indicator {
  position: absolute;
  top: -60px;
  left: 50%;
  transform: translateX(-50%);
  display: flex;
  align-items: center;
  justify-content: center;
  width: 40px;
  height: 40px;
  border-radius: 50%;
  background-color: var(--color-button-bg);
  color: var(--color-button-text);
  font-size: 1.2rem;
  opacity: 0;
  transition: all var(--animation-duration-normal) var(--animation-easing);
}

.pull-refresh-indicator.visible {
  opacity: 1;
  top: 20px;
}

.pull-refresh-indicator.loading {
  animation: spin 1s linear infinite;
}

@keyframes spin {
  from {
    transform: translateX(-50%) rotate(0deg);
  }
  to {
    transform: translateX(-50%) rotate(360deg);
  }
}

/* Mobile-first card variants */
.card-elevated {
  box-shadow:
    0 4px 6px -1px rgba(0, 0, 0, 0.1),
    0 2px 4px -1px rgba(0, 0, 0, 0.06);
}

.card-elevated:hover {
  box-shadow:
    0 10px 15px -3px rgba(0, 0, 0, 0.1),
    0 4px 6px -2px rgba(0, 0, 0, 0.05);
}

/* Swipe animations */
.swipe-left-enter {
  transform: translateX(100%);
}

.swipe-left-enter-active {
  transform: translateX(0);
  transition: transform var(--animation-duration-normal) var(--animation-easing);
}

.swipe-right-enter {
  transform: translateX(-100%);
}

.swipe-right-enter-active {
  transform: translateX(0);
  transition: transform var(--animation-duration-normal) var(--animation-easing);
}

/* Page transitions for mobile */
.page-slide-enter {
  transform: translateX(100%);
}

.page-slide-enter-active {
  transform: translateX(0);
  transition: transform var(--animation-duration-slow) var(--animation-easing);
}

.page-slide-exit {
  transform: translateX(0);
}

.page-slide-exit-active {
  transform: translateX(-100%);
  transition: transform var(--animation-duration-slow) var(--animation-easing);
}

/* Mobile loading states */
.loading-skeleton {
  background: linear-gradient(
    90deg,
    var(--color-bg-secondary) 25%,
    var(--color-bg-tertiary) 50%,
    var(--color-bg-secondary) 75%
  );
  background-size: 200% 100%;
  animation: loading-shimmer 2s infinite;
}

@keyframes loading-shimmer {
  0% {
    background-position: 200% 0;
  }
  100% {
    background-position: -200% 0;
  }
}

/* Report section animations */
@keyframes fade-in-up {
  from {
    opacity: 0;
    transform: translateY(20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

@keyframes fade-in {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Note: canonical @keyframes fade-in-up and @keyframes fade-in are defined earlier
   (near "Report section animations"). Later duplicate definitions were removed
   to prevent conflicts and duplication. */

/* Celebration animations */
@keyframes bounce-celebration {
  0%,
  100% {
    transform: translateY(0) scale(1);
  }
  25% {
    transform: translateY(-10px) scale(1.05);
  }
  50% {
    transform: translateY(0) scale(1);
  }
  75% {
    transform: translateY(-5px) scale(1.02);
  }
}

@keyframes pulse-glow {
  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(34, 197, 94, 0.4);
  }
  50% {
    box-shadow: 0 0 20px 8px rgba(34, 197, 94, 0.1);
  }
}

/* Counting animation base */
@keyframes count-up {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Mobile-specific utility classes */
.ios-bounce-fix {
  -webkit-overflow-scrolling: touch;
  overscroll-behavior: contain;
}

.hardware-accelerated {
  transform: translateZ(0);
  backface-visibility: hidden;
  perspective: 1000px;
}

/* Report animation utility classes */
.animate-fade-in-up {
  animation: fade-in-up 0.6s var(--animation-easing) forwards;
}

.animate-fade-in {
  animation: fade-in 0.4s var(--animation-easing) forwards;
}

.animate-scale-in {
  animation: scale-in 0.4s var(--animation-easing) forwards;
}

.animate-slide-in-right {
  animation: slide-in-right 0.5s var(--animation-easing) forwards;
}

.animate-bounce-celebration {
  animation: bounce-celebration 0.8s var(--animation-easing);
}

.animate-pulse-glow {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Stagger animation delays for sequential items */
.stagger-1 {
  animation-delay: 0.05s;
}
.stagger-2 {
  animation-delay: 0.1s;
}
.stagger-3 {
  animation-delay: 0.15s;
}
.stagger-4 {
  animation-delay: 0.2s;
}
.stagger-5 {
  animation-delay: 0.25s;
}
.stagger-6 {
  animation-delay: 0.3s;
}
.stagger-7 {
  animation-delay: 0.35s;
}
.stagger-8 {
  animation-delay: 0.4s;
}

/* =============================================
   === EVENT LOGGING ANIMATIONS              ===
   =============================================
*/

/* Event form animations */
@keyframes form-field-focus {
  from {
    box-shadow: 0 0 0 0 rgba(88, 28, 135, 0.4);
  }
  to {
    box-shadow: 0 0 0 3px rgba(88, 28, 135, 0.15);
  }
}

@keyframes button-press {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.96);
  }
  100% {
    transform: scale(1);
  }
}

@keyframes success-bounce {
  0%,
  100% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.05);
  }
  50% {
    transform: scale(0.98);
  }
  75% {
    transform: scale(1.02);
  }
}

/* Event list animations */
@keyframes event-appear {
  from {
    opacity: 0;
    transform: translateY(-10px) scale(0.98);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes event-item-hover {
  from {
    transform: translateY(0);
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }
  to {
    transform: translateY(-2px);
    box-shadow: 0 4px 16px rgba(88, 28, 135, 0.2);
  }
}

/* Milestone celebration animations */
@keyframes confetti-fall {
  0% {
    transform: translateY(-100%) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(360deg);
    opacity: 0;
  }
}

@keyframes milestone-glow {
  0%,
  100% {
    box-shadow: 0 0 10px rgba(34, 197, 94, 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
  }
}

@keyframes success-checkmark {
  0% {
    opacity: 0;
    transform: scale(0) rotate(-45deg);
  }
  50% {
    transform: scale(1.2) rotate(-45deg);
  }
  100% {
    opacity: 1;
    transform: scale(1) rotate(0deg);
  }
}

/* Event loading skeletons */
@keyframes event-skeleton-pulse {
  0%,
  100% {
    opacity: 0.4;
  }
  50% {
    opacity: 0.6;
  }
}

/* Animation utility classes for events */
.animate-event-appear {
  animation: event-appear 0.4s var(--animation-easing) forwards;
}

.animate-success-bounce {
  animation: success-bounce 0.5s var(--animation-easing);
}

.animate-button-press {
  animation: button-press 0.2s var(--animation-easing);
}

.animate-milestone-glow {
  animation: milestone-glow 2s ease-in-out infinite;
}

.animate-success-checkmark {
  animation: success-checkmark 0.5s var(--animation-easing) forwards;
}

/* Event skeleton loader */
.event-skeleton {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.05) 25%,
    rgba(255, 255, 255, 0.1) 50%,
    rgba(255, 255, 255, 0.05) 75%
  );
  background-size: 200% 100%;
  animation: loading-shimmer 2s infinite;
  border-radius: 0.5rem;
  min-height: 80px;
}

.event-skeleton-item {
  animation: event-skeleton-pulse 1.5s ease-in-out infinite;
}

/* Event form micro-interactions */
.event-form-field {
  transition: all var(--animation-duration-fast) var(--animation-easing);
}

.event-form-field:focus {
  animation: form-field-focus 0.3s var(--animation-easing) forwards;
}

.event-button {
  transition: all var(--animation-duration-fast) var(--animation-easing);
  transform-origin: center;
}

.event-button:hover:not(:disabled) {
  transform: translateY(-1px);
  box-shadow: 0 4px 12px rgba(88, 28, 135, 0.3);
}

.event-button:active:not(:disabled) {
  animation: button-press 0.2s var(--animation-easing);
}

/* Event list item interactions */
.event-item {
  transition: all var(--animation-duration-normal) var(--animation-easing);
  transform-origin: center;
}

.event-item:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 16px rgba(88, 28, 135, 0.2);
}

/* Milestone event special styling */
.event-milestone {
  position: relative;
  overflow: hidden;
}

.event-milestone::before {
  content: "";
  position: absolute;
  top: 0;
  left: 0;
  right: 0;
  bottom: 0;
  background: linear-gradient(
    135deg,
    rgba(34, 197, 94, 0.1) 0%,
    rgba(34, 197, 94, 0) 50%
  );
  pointer-events: none;
}

/* Confetti particle for milestone celebrations */
.confetti-particle {
  position: fixed;
  pointer-events: none;
  z-index: 9999;
  animation: confetti-fall 3s linear forwards;
}

/* Success message animation */
.event-success-message {
  animation: fade-in-up 0.4s var(--animation-easing) forwards;
}

/* Skeleton loading for report sections */
.report-skeleton {
  background: linear-gradient(
    90deg,
    rgba(88, 28, 135, 0.05) 25%,
    rgba(88, 28, 135, 0.1) 50%,
    rgba(88, 28, 135, 0.05) 75%
  );
  background-size: 200% 100%;
  animation: loading-shimmer 2s infinite;
  border-radius: 0.5rem;
  min-height: 100px;
}

.report-skeleton-stat {
  background: linear-gradient(
    90deg,
    rgba(88, 28, 135, 0.05) 25%,
    rgba(88, 28, 135, 0.1) 50%,
    rgba(88, 28, 135, 0.05) 75%
  );
  background-size: 200% 100%;
  animation: loading-shimmer 2s infinite;
  border-radius: 0.5rem;
  height: 80px;
  width: 100%;
}

/* Hover effects for interactive elements */
.stat-card-hover {
  transition: all var(--animation-duration-normal) var(--animation-easing);
}

.stat-card-hover:hover {
  transform: translateY(-2px);
  box-shadow: 0 8px 16px rgba(88, 28, 135, 0.2);
}

/* =============================================
   === ACCESSIBILITY ENHANCEMENTS (WCAG AA)  ===
   =============================================
*/

/* Screen reader only content */
.sr-only {
  position: absolute;
  width: 1px;
  height: 1px;
  padding: 0;
  margin: -1px;
  overflow: hidden;
  clip: rect(0, 0, 0, 0);
  white-space: nowrap;
  border-width: 0;
}

.sr-only:focus,
.sr-only:active {
  position: static;
  width: auto;
  height: auto;
  padding: inherit;
  margin: inherit;
  overflow: visible;
  clip: auto;
  white-space: normal;
}

/* Enhanced focus indicators for better visibility */
a:focus-visible,
button:focus-visible,
[role="button"]:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
  box-shadow: 0 0 0 4px rgba(88, 28, 135, 0.2);
}

/* Ensure all interactive elements have visible focus states */
[role="button"]:focus-visible,
[role="link"]:focus-visible,
[role="tab"]:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
}

/* High contrast mode support */
@media (prefers-contrast: more) {
  .text-nightly-celadon,
  .text-nightly-honeydew,
  .text-purple-200,
  .text-purple-300 {
    font-weight: 600;
  }

  a:focus-visible,
  button:focus-visible {
    outline-width: 4px;
    outline-offset: 3px;
  }
}

/* Accessibility improvements for mobile */
@media (prefers-reduced-motion: reduce) {
  .touch-target:active,
  .btn-mobile:active,
  .card-mobile:hover,
  .swipe-left-enter-active,
  .swipe-right-enter-active,
  .page-slide-enter-active,
  .page-slide-exit-active {
    transform: none;
    transition: none;
  }

  .loading-skeleton,
  .report-skeleton,
  .report-skeleton-stat {
    animation: none;
    background: rgba(88, 28, 135, 0.1);
  }

  .pull-refresh-indicator.loading {
    animation: none;
  }

  /* Disable all report animations when reduce motion is preferred */
  .animate-fade-in-up,
  .animate-fade-in,
  .animate-scale-in,
  .animate-slide-in-right,
  .animate-bounce-celebration,
  .animate-pulse-glow {
    animation: none;
    opacity: 1;
    transform: none;
  }

  .stat-card-hover:hover {
    transform: none;
  }

  /* Disable event-specific animations */
  .animate-event-appear,
  .animate-success-bounce,
  .animate-button-press,
  .animate-milestone-glow,
  .animate-success-checkmark,
  .event-success-message {
    animation: none;
    opacity: 1;
    transform: none;
  }

  .event-item:hover,
  .event-button:hover:not(:disabled) {
    transform: none;
    box-shadow: 0 2px 8px rgba(0, 0, 0, 0.1);
  }

  .event-button:active:not(:disabled) {
    animation: none;
  }

  .event-form-field:focus {
    animation: none;
  }

  .event-skeleton,
  .event-skeleton-item {
    animation: none;
    background: rgba(255, 255, 255, 0.1);
  }

  .confetti-particle {
    display: none;
  }
}

/* High contrast mode support */
@media (prefers-contrast: more) {
  .btn-mobile,
  .input-mobile,
  .card-mobile {
    border-width: 2px;
  }

  .bottom-nav-item.active {
    outline: 2px solid currentColor;
    outline-offset: 2px;
  }
}

/* Dark mode refinements for mobile */
@media (prefers-color-scheme: dark) {
  .card-elevated {
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.3),
      0 2px 4px -1px rgba(0, 0, 0, 0.2);
  }

  .card-elevated:hover {
    box-shadow:
      0 10px 15px -3px rgba(0, 0, 0, 0.3),
      0 4px 6px -2px rgba(0, 0, 0, 0.2);
  }
}

/* =============================================
   === 3. SHARED COMPONENT & ELEMENT STYLES  ===
   =============================================
*/
/* --- Containers & Cards --- */
.card,
.box,
.section,
.tracker-box,
.bordered {
  background-color: var(--color-bg-secondary);
  border: 1px solid var(--color-border-primary);
  color: var(--color-text-primary);
}
.box,
.card,
.section {
  @apply p-4 rounded-md;
}
.bordered {
  border-color: var(--color-border-accent);
}

/* --- Logo --- */
.logo {
  height: 6em;
  padding: 1.5em;
  will-change: filter;
  transition: filter 300ms;
}
.logo:hover {
  filter: drop-shadow(0 0 2em #646cffaa);
}
.logo.react:hover {
  filter: drop-shadow(0 0 2em #61dafbaa);
}

/* --- Typography --- */
h1,
h2,
h3,
h4,
h5,
h6,
.h3-title {
  color: var(--color-text-accent);
}
p:not([class]),
span:not([class]),
div:not([class]) {
  color: var(--color-text-secondary);
}
.subpage-title {
  border-bottom: 1px solid var(--color-border-accent);
  @apply text-xl font-semibold pb-1;
}

/* --- Interactive Elements --- */
button {
  background-color: var(--color-button-bg);
  color: var(--color-button-text);
  @apply px-4 py-2 rounded transition;
}
button:hover {
  background-color: var(--color-button-bg-hover);
}
button:disabled {
  @apply opacity-50 cursor-not-allowed;
}
a {
  color: var(--color-text-accent);
  @apply transition;
}
a:hover {
  color: var(--color-text-primary);
}
label,
legend {
  color: var(--color-text-accent);
}

/* --- Forms --- */
input,
select,
textarea {
  border: 1px solid var(--color-border-accent);
  background-color: var(--color-bg-tertiary);
  color: var(--color-text-primary);
  @apply px-2 py-1 rounded;
}
input:focus,
select:focus,
textarea:focus {
  --tw-ring-color: var(--color-focus-ring);
  border-color: var(--color-focus-ring);
  outline: none;
  box-shadow: 0 0 0 2px var(--color-focus-ring);
}
input[type="checkbox"],
input[type="radio"] {
  accent-color: var(--color-accent);
  box-shadow: none;
}

/* --- Tables --- */
table {
  border: 1px solid var(--color-border-primary);
  background-color: var(--color-bg-secondary);
  color: var(--color-text-primary);
  @apply w-full;
}
th,
td {
  border: 1px solid var(--color-border-primary);
  @apply px-2 py-1 text-left;
}

/* =============================================
   === 4. PAGE-SPECIFIC STYLES             ===
   =============================================
*/
/* --- Settings Pages --- */
.settings-container {
  @apply space-y-6;
}
.settings-section {
  background-color: var(--color-bg-secondary);
  border: 1px solid var(--color-border-primary);
  @apply p-4 rounded-lg text-left;
}
.settings-section h3,
.settings-section h4 {
  color: var(--color-text-accent);
  border-bottom: 1px solid var(--color-border-primary);
  @apply text-lg font-semibold mb-3 pb-2;
}

/* --- Keyholder Section --- */
.keyholder-section-box {
  @apply p-4 rounded-lg text-left border;
  background-color: #7f1d1d;
  border-color: #dc2626;
  color: #fecaca;
}
.keyholder-section-box h4 {
  color: #fca5a5;
  border-bottom-color: #dc2626;
}
.keyholder-section-box button {
  background-color: #dc2626;
  color: #fee2e2;
}
.keyholder-section-box button:hover {
  background-color: #dc2626;
}
.keyholder-section-box input {
  background-color: #991b1b;
  border-color: #dc2626;
}

.keyholder-unlocked-controls {
  @apply space-y-4;
}
.keyholder-unlocked-controls .duration-box {
  @apply p-4 rounded-lg text-left border;
  background-color: #172554;
  border-color: #1d4ed8;
  color: #bfdbfe;
}
.keyholder-unlocked-controls .reward-box {
  @apply p-4 rounded-lg text-left border;
  background-color: #422006;
  border-color: #b45309;
  color: #fef08a;
}
.keyholder-unlocked-controls .punishment-box {
  @apply p-4 rounded-lg text-left border;
  background-color: #7f1d1d;
  border-color: #dc2626;
  color: #fecaca;
}
.keyholder-unlocked-controls input {
  @apply w-full bg-transparent;
}

/* --- Tasks Page --- */
.tasks-container {
  @apply p-4 rounded-lg text-left border;
  background-color: #172554;
  border-color: #1d4ed8;
  color: #bfdbfe;
}
.add-task-form {
  @apply flex items-center gap-2 mb-4;
}
.add-task-form input {
  @apply flex-grow;
}
.add-task-form button {
  @apply flex-shrink-0;
}
.task-list {
  @apply space-y-2;
}
.task-item {
  background-color: rgba(0, 0, 0, 0.2);
  @apply flex items-center justify-between p-2 rounded-md transition-colors;
}
.task-label {
  @apply flex items-center gap-3 cursor-pointer;
}
.complete-button {
  background-color: #15803d;
  color: #dcfce7;
  @apply flex items-center gap-2 text-xs font-bold px-3 py-1 flex-shrink-0;
}
.complete-button:hover {
  background-color: #16a34a;
}
.delete-button {
  background-color: transparent;
  color: #f87171;
  @apply p-1 rounded-full opacity-60 transition-all;
}
.delete-button:hover {
  background-color: #ef4444;
  color: #ffffff;
  @apply opacity-100;
}
.no-tasks-message {
  @apply text-center p-4 text-gray-400;
}

/* --- Task Approval Section (in Keyholder Page) --- */
.task-approval-box {
  background-color: var(--color-bg-secondary);
  border-color: var(--color-border-primary);
  @apply p-4 rounded-lg text-left border;
}
.task-approval-box h4 {
  color: var(--color-text-accent);
  border-bottom-color: var(--color-border-primary);
}
.task-approval-list {
  @apply space-y-2 mt-3;
}
.task-review-item {
  background-color: rgba(0, 0, 0, 0.2);
  @apply flex items-center justify-between p-2 rounded-md;
}
.task-review-text {
  color: var(--color-text-primary);
  @apply text-sm flex-grow;
}
.task-review-actions {
  @apply flex items-center gap-2 flex-shrink-0 ml-4;
}
.task-review-actions button {
  @apply text-xs font-bold px-3 py-1;
}
.approve-button {
  background-color: #059669;
  color: #d1fae5;
}
.approve-button:hover {
  background-color: #10b981;
}
.reject-button {
  background-color: #be185d;
  color: #ffe4e6;
}
.reject-button:hover {
  background-color: #e11d48;
}

/* --- Task History & Rewards/Punishments Log --- */
.task-history-container h2 {
  @apply mb-4;
}
.task-history-list {
  @apply space-y-3;
}
.task-outcome-item {
  @apply flex justify-between items-center p-3 rounded-lg shadow-sm;
}
.task-info {
  @apply flex-grow;
}
.task-text {
  @apply font-semibold;
}
.task-text.completed {
  @apply line-through text-gray-500;
}
.task-status {
  @apply text-xs opacity-80;
}
.standalone-note {
  @apply italic opacity-70;
}
.task-consequence {
  @apply text-right flex-shrink-0 ml-4;
}
.consequence-label {
  @apply text-xs font-bold uppercase opacity-80;
}
.consequence-time {
  @apply text-lg font-mono font-semibold;
}

/* --- Personal Goal Section --- */
.personal-goal-section {
  @apply p-4 rounded-lg text-left border;
  background-color: #172554;
  border-color: #1d4ed8;
  color: #bfdbfe;
}
.personal-goal-section fieldset:disabled {
  @apply opacity-50;
}
.personal-goal-section label {
  @apply block text-xs font-medium mb-1;
}
.current-goal-message {
  @apply text-sm text-green-300 mb-4;
}
.locked-state-message {
  @apply text-sm bg-gray-900 border border-gray-600 p-3 rounded-md text-center text-yellow-300 mb-4;
}
.self-lock-toggle {
  @apply flex items-center justify-center gap-3 p-2 border border-blue-800 bg-blue-900 rounded-md;
}
.self-lock-toggle label {
  @apply font-bold mb-0;
}
.self-lock-input-box {
  @apply p-4 rounded-lg text-left border;
  background-color: #422006;
  border-color: #b45309;
  color: #fef08a;
}

/* --- Special Challenge Goals --- */
.special-challenge-section {
  @apply space-y-6;
}
.challenge-card {
  @apply p-4 rounded-lg border transition-all duration-200;
}
.challenge-card.locktober {
  @apply bg-orange-900/20 border-orange-500/50 text-orange-100;
}
.challenge-card.no-nut-november {
  @apply bg-blue-900/20 border-blue-500/50 text-blue-100;
}
.challenge-card:hover {
  @apply shadow-lg transform scale-105;
}
.challenge-progress-bar {
  @apply w-full bg-gray-700 rounded-full h-2 overflow-hidden;
}
.challenge-progress-fill {
  @apply h-2 rounded-full transition-all duration-300;
}
.challenge-progress-fill.locktober {
  @apply bg-gradient-to-r from-orange-400 to-red-500;
}
.challenge-progress-fill.no-nut-november {
  @apply bg-gradient-to-r from-blue-400 to-indigo-500;
}
.challenge-join-button {
  @apply w-full bg-gradient-to-r from-purple-600 to-pink-600 hover:from-purple-700 hover:to-pink-700 text-white font-semibold py-2 px-4 rounded-lg transition-all duration-200 flex items-center justify-center;
}
.challenge-active-indicator {
  @apply flex items-center justify-center text-green-400;
}
.challenge-completed-indicator {
  @apply flex items-center justify-center text-yellow-400;
}
.text-gold-400 {
  color: #fbbf24;
}
.self-lock-input-box h4 {
  @apply text-lg font-semibold mb-3 pb-2 border-b;
  color: #fde047;
  border-bottom-color: #92400e;
}

/* --- Rewards/Punishments History Display --- */
.rewards-history-box,
.punishments-history-box {
  @apply p-4 rounded-lg shadow-sm;
}

.rewards-history-box h4,
.punishments-history-box h4 {
  @apply text-lg font-semibold mb-2 flex items-center;
}

.rewards-history-box ul,
.rewards-history-box p,
.punishments-history-box ul,
.punishments-history-box p {
  @apply text-left list-disc list-inside space-y-1 text-sm;
}

/* Apply specific text colors from your utility classes */
.rewards-history-box li,
.rewards-history-box p {
  color: #fde047;
}

.punishments-history-box li,
.punishments-history-box p {
  color: #fca5a5;
}

/* =============================================
   === 5. UTILITY & OVERRIDE CLASSES         ===
   =============================================
*/
/* --- Colored Utility Boxes --- */
.box-blue {
  background-color: #172554;
  border-color: #1d4ed8;
  color: #bfdbfe;
}
.box-blue h4 {
  color: #93c5fd;
  border-bottom-color: #1e40af;
}
.box-blue button {
  background-color: #1d4ed8;
  color: #dbeafe;
}
.box-blue button:hover {
  background-color: #2563eb;
}
.box-blue input {
  background-color: #1e3a8a;
  border-color: #2563eb;
}
.box-yellow {
  background-color: #422006;
  border-color: #b45309;
  color: #fef08a;
}
.box-yellow h4 {
  color: #fde047;
  border-bottom-color: #92400e;
}
.box-yellow button {
  background-color: #b45309;
  color: #fefce8;
}
.box-yellow button:hover {
  background-color: #d97706;
}
.box-yellow input {
  background-color: #713f12;
  border-color: #d97706;
}
.box-red {
  background-color: #7f1d1d;
  border-color: #dc2626;
  color: #fecaca;
}
.box-red h4 {
  color: #fca5a5;
  border-bottom-color: #dc2626;
}
.box-red button {
  background-color: #dc2626;
  color: #fee2e2;
}
.box-red button:hover {
  background-color: #dc2626;
}
.box-red input {
  background-color: #991b1b;
  border-color: #dc2626;
}

/* --- Makes a <button> element look like plain text/link --- */
.button-as-link {
  background: none;
  border: none;
  padding: 0;
  margin: 0;
  font: inherit; /* Inherit font from the parent */
  color: var(--color-text-accent); /* UPDATED: Use the theme's accent color */
  cursor: pointer;
  text-align: inherit;
}

/* --- Specific Text Colors --- */
.text-keyholder {
  @apply text-pink-400;
}

/* --- Miscellaneous --- */
.no-border {
  @apply !border-none;
}

/* =============================================
   === 6. GLASS MORPHISM FRAMEWORK           ===
   =============================================
*/

/* --- Glass Base Classes --- */
.glass {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.glass-hover:hover {
  background: rgba(255, 255, 255, 0.08);
  border-color: rgba(255, 255, 255, 0.15);
  transform: translateY(-1px);
  box-shadow: 0 12px 40px 0 rgba(31, 38, 135, 0.45);
}

.glass-card {
  background: rgba(215, 210, 234, 0.15);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 1rem;
  padding: 1.5rem;
  position: relative;
  overflow: hidden;
}

/* Production glass cards - lavender glow */
.theme-prod .glass-card {
  border: 2px solid rgba(215, 210, 234, 0.4); /* lavender_web border */
  box-shadow: 0 8px 32px 0 rgba(215, 210, 234, 0.3);
}

/* Nightly glass cards - pink glow */
.theme-nightly .glass-card {
  border: 2px solid rgba(179, 32, 102, 0.3); /* deep_rose border */
  box-shadow: 0 8px 32px 0 rgba(179, 32, 102, 0.2);
}

.glass-card::before {
  content: "";
  position: absolute;
  top: 0;
  left: -100%;
  width: 100%;
  height: 100%;
  background: linear-gradient(
    90deg,
    transparent,
    rgba(255, 255, 255, 0.1),
    transparent
  );
  transition: left 0.5s;
}

.glass-card:hover::before {
  left: 100%;
}

.glass-nav {
  background: rgba(255, 255, 255, 0.03);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 0.75rem;
  padding: 0.5rem 1rem;
}

.glass-button {
  background: rgba(255, 255, 255, 0.08);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 0.5rem;
  padding: 0.5rem 1rem;
  font-weight: 500;
  position: relative;
  overflow: hidden;
}

.glass-button::after {
  content: "";
  position: absolute;
  top: 50%;
  left: 50%;
  width: 0;
  height: 0;
  border-radius: 50%;
  background: rgba(255, 255, 255, 0.2);
  transform: translate(-50%, -50%);
  transition:
    width 0.3s,
    height 0.3s;
}

.glass-button:hover::after {
  width: 300px;
  height: 300px;
}

.glass-input {
  background: rgba(255, 255, 255, 0.05);
  backdrop-filter: blur(8px);
  -webkit-backdrop-filter: blur(8px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 0.5rem;
  padding: 0.75rem 1rem;
}

.glass-input:focus {
  border-color: rgba(147, 197, 253, 0.5);
  box-shadow: 0 0 0 3px rgba(147, 197, 253, 0.1);
  outline: none;
}

/* --- Liquid Glass Effects --- */
.liquid-glass {
  background: linear-gradient(
    45deg,
    rgba(147, 197, 253, 0.1),
    rgba(196, 181, 253, 0.1),
    rgba(251, 146, 60, 0.1)
  );
  background-size: 200% 200%;
  animation: liquid-flow 6s ease-in-out infinite;
  backdrop-filter: blur(12px);
  -webkit-backdrop-filter: blur(12px);
  border: 1px solid rgba(255, 255, 255, 0.15);
  box-shadow:
    0 8px 32px rgba(147, 197, 253, 0.3),
    inset 0 1px 0 rgba(255, 255, 255, 0.1);
}

.glass-morphism {
  background: linear-gradient(
    135deg,
    rgba(255, 255, 255, 0.1),
    rgba(255, 255, 255, 0.05)
  );
  backdrop-filter: blur(15px);
  -webkit-backdrop-filter: blur(15px);
  border-radius: 20px;
  border: 1px solid rgba(255, 255, 255, 0.18);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  animation: glass-morph 4s ease-in-out infinite;
}

/* --- Enhanced Card Variants --- */
.primary-stat-card {
  background: rgba(215, 210, 234, 0.15);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 1rem;
  padding: 1.5rem;
  position: relative;
  overflow: hidden;
}

/* Production primary-stat-card - lavender glow */
.theme-prod .primary-stat-card {
  border: 2px solid rgba(215, 210, 234, 0.4); /* lavender_web border */
  box-shadow: 0 8px 32px 0 rgba(215, 210, 234, 0.3);
}

/* Nightly primary-stat-card - pink glow */
.theme-nightly .primary-stat-card {
  border: 2px solid rgba(179, 32, 102, 0.3); /* deep_rose border */
  box-shadow: 0 8px 32px 0 rgba(179, 32, 102, 0.2);
}

.glass-card-secondary {
  background: rgba(196, 181, 253, 0.08);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(196, 181, 253, 0.2);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 1rem;
  padding: 1.5rem;
  position: relative;
  overflow: hidden;
}

.glass-card-accent {
  background: rgba(251, 146, 60, 0.08);
  backdrop-filter: blur(10px);
  -webkit-backdrop-filter: blur(10px);
  border: 1px solid rgba(251, 146, 60, 0.2);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  border-radius: 1rem;
  padding: 1.5rem;
  position: relative;
  overflow: hidden;
}

/* --- Floating Glass Elements --- */
.glass-float {
  animation: float 3s ease-in-out infinite;
}

/* --- Glass Modal --- */
.glass-modal {
  background: rgba(0, 0, 0, 0.8);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
}

.glass-modal-content {
  background: rgba(255, 255, 255, 0.1);
  backdrop-filter: blur(25px);
  -webkit-backdrop-filter: blur(25px);
  border: 1px solid rgba(255, 255, 255, 0.1);
  box-shadow: 0 8px 32px 0 rgba(31, 38, 135, 0.37);
  border-radius: 1rem;
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
  position: relative;
  overflow: hidden;
}

/* --- Glass Header --- */
.glass-header {
  background: rgba(0, 0, 0, 0.4);
  backdrop-filter: blur(20px);
  -webkit-backdrop-filter: blur(20px);
  border-bottom: 1px solid rgba(255, 255, 255, 0.1);
}

/* =============================================
   === 7. ANIMATIONS & MEDIA QUERIES         ===
   =============================================
*/

/* Session state transitions */
@keyframes tracker-state-enter {
  from {
    opacity: 0;
    transform: scale(0.95);
  }
  to {
    opacity: 1;
    transform: scale(1);
  }
}

.tracker-state-transition {
  animation: tracker-state-enter 0.4s cubic-bezier(0.4, 0, 0.2, 1);
}

/* Timer pulse animation for active sessions */
@keyframes timer-pulse {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.95;
    transform: scale(1.02);
  }
}

.timer-pulse {
  animation: timer-pulse 2s ease-in-out infinite;
}

/* Smooth number counter animation */
@keyframes number-update {
  0% {
    opacity: 0.7;
    transform: translateY(-5px);
  }
  100% {
    opacity: 1;
    transform: translateY(0);
  }
}

.number-update {
  animation: number-update 0.3s ease-out;
}

/* Loading skeleton shimmer */
@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.skeleton-shimmer {
  background: linear-gradient(
    90deg,
    rgba(215, 210, 234, 0.1) 25%,
    rgba(215, 210, 234, 0.2) 50%,
    rgba(215, 210, 234, 0.1) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 2s infinite;
}

/* Button press feedback */
@keyframes button-press {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

.button-press-active:active {
  animation: button-press 0.2s ease-out;
}

/* Glow effect for active states */
@keyframes tracker-glow {
  0%,
  100% {
    box-shadow:
      0 0 10px rgba(34, 197, 94, 0.3),
      0 0 20px rgba(34, 197, 94, 0.2);
  }
  50% {
    box-shadow:
      0 0 20px rgba(34, 197, 94, 0.5),
      0 0 30px rgba(34, 197, 94, 0.3);
  }
}

.tracker-glow-green {
  animation: tracker-glow 3s ease-in-out infinite;
}

@keyframes tracker-glow-yellow {
  0%,
  100% {
    box-shadow:
      0 0 10px rgba(234, 179, 8, 0.3),
      0 0 20px rgba(234, 179, 8, 0.2);
  }
  50% {
    box-shadow:
      0 0 20px rgba(234, 179, 8, 0.5),
      0 0 30px rgba(234, 179, 8, 0.3);
  }
}

.tracker-glow-yellow {
  animation: tracker-glow-yellow 3s ease-in-out infinite;
}

/* Milestone celebration */
@keyframes milestone-celebration {
  0% {
    transform: scale(1) rotate(0deg);
  }
  25% {
    transform: scale(1.1) rotate(-5deg);
  }
  50% {
    transform: scale(1.15) rotate(0deg);
  }
  75% {
    transform: scale(1.1) rotate(5deg);
  }
  100% {
    transform: scale(1) rotate(0deg);
  }
}

.milestone-celebration {
  animation: milestone-celebration 0.6s ease-out;
}

/* Confetti particles */
@keyframes confetti-fall {
  0% {
    transform: translateY(-10vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.confetti-particle {
  animation: confetti-fall 3s linear forwards;
}

/* Stat card hover effect */
.tracker-card-hover {
  transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
}

.tracker-card-hover:hover {
  transform: translateY(-4px);
  box-shadow: 0 12px 24px rgba(0, 0, 0, 0.15);
}

/* Focus ring animation */
@keyframes focus-ring-pulse {
  0%,
  100% {
    box-shadow: 0 0 0 2px var(--color-focus-ring);
  }
  50% {
    box-shadow: 0 0 0 4px var(--color-focus-ring);
  }
}

.focus-ring-animated:focus-visible {
  animation: focus-ring-pulse 1s ease-in-out infinite;
}

/* =============================================
   === ACCESSIBILITY ENHANCEMENTS (WCAG AA) ===
   =============================================
*/

/* Enhanced focus indicators for all interactive elements */
button:focus-visible,
a:focus-visible,
input:focus-visible,
select:focus-visible,
textarea:focus-visible,
[role="button"]:focus-visible,
[role="link"]:focus-visible,
[tabindex]:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
  border-radius: 4px;
}

/* High contrast focus for glass buttons */
.glass-button:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 3px;
  box-shadow: 0 0 0 6px rgba(71, 22, 108, 0.2);
}

/* Skip link for keyboard navigation */
.skip-link {
  position: absolute;
  top: -40px;
  left: 0;
  background: var(--color-button-bg);
  color: var(--color-button-text);
  padding: 8px 16px;
  text-decoration: none;
  border-radius: 0 0 4px 0;
  z-index: 100;
  font-weight: 600;
  transition: top var(--animation-duration-fast) var(--animation-easing);
}

.skip-link:focus {
  top: 0;
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
}

/* Ensure minimum color contrast for text */
.text-contrast-aa {
  color: #ffffff;
  text-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);
}

/* Live region for screen reader announcements */
[aria-live] {
  /* Ensure live regions are accessible but not visually intrusive */
}

/* Timer and status indicators - ensure they're accessible */
[role="timer"],
[role="status"] {
  /* These already have appropriate styling, ensuring they're recognized */
}

/* Enhanced button press feedback for accessibility */
.button-press-active:active:not(:disabled) {
  transform: scale(0.97);
  transition: transform 0.1s ease-out;
}

/* Keyboard-only focus indicators (not on mouse click) */
:focus:not(:focus-visible) {
  outline: none;
}

/* High contrast mode support */
@media (prefers-contrast: more) {
  button,
  input,
  select,
  textarea,
  .glass-button,
  .card {
    border: 2px solid currentColor;
  }

  button:focus-visible,
  input:focus-visible,
  select:focus-visible,
  textarea:focus-visible,
  .glass-button:focus-visible {
    outline: 4px solid var(--color-focus-ring);
    outline-offset: 2px;
  }
}

/* Reduced motion support */
@media (prefers-reduced-motion: reduce) {
  *,
  *::before,
  *::after {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .focus-ring-animated:focus-visible {
    animation: none;
  }
}

/* Session recovery modal slide in */
@keyframes modal-slide-in {
  from {
    opacity: 0;
    transform: translateY(-20px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.modal-slide-in {
  animation: modal-slide-in 0.3s ease-out;
}

/* Progress bar fill animation */
@keyframes progress-fill {
  from {
    transform: scaleX(0);
    transform-origin: left;
  }
  to {
    transform: scaleX(1);
    transform-origin: left;
  }
}

.progress-fill-animated {
  animation: progress-fill 1s ease-out forwards;
}

/* Note: canonical @keyframes fade-in-up and @keyframes fade-in are defined earlier
   (near "Report section animations"). Later duplicate definitions were removed
   to prevent conflicts and duplication. */

/* =============================================
   === ACHIEVEMENT TOAST STYLES           ===
   =============================================
*/

/* Custom styles for achievement toasts */
.achievement-toast {
  background: linear-gradient(
    135deg,
    #d97706 0%,
    #eab308 50%,
    #f97316 100%
  ) !important;
  border: 2px solid #facc15 !important;
  border-radius: 12px !important;
  box-shadow: 0 10px 25px rgba(245, 158, 11, 0.3) !important;
  min-height: 80px !important;
}

.achievement-toast-body {
  padding: 0 !important;
}

/* Toast container positioning */
.Toastify__toast-container {
  width: 400px !important;
}

@media (max-width: 768px) {
  .Toastify__toast-container {
    width: 95vw !important;
    left: 50% !important;
    transform: translateX(-50%) !important;
  }

  .achievement-toast {
    margin: 0 !important;
  }
}

/* Toast animation */
.Toastify__toast--success.achievement-toast {
  animation: achievementSlideIn 0.5s ease-out;
}

@keyframes achievementSlideIn {
  from {
    transform: translateX(100%) scale(0.8);
    opacity: 0;
  }
  to {
    transform: translateX(0) scale(1);
    opacity: 1;
  }
}

/* Animation for radio button selection */
@keyframes scale-in {
  0% {
    transform: scale(0);
    opacity: 0;
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.animate-scale-in {
  animation: scale-in 0.2s ease-out;
}

/* Progress bar for achievement toasts */
.achievement-toast .Toastify__progress-bar {
  background: linear-gradient(90deg, #fde047, #fcd34d) !important;
}

/* =============================================
   === TASK UI ANIMATIONS & POLISH           ===
   =============================================
*/

/* Task Card Animations */
@keyframes task-card-hover-shadow {
  from {
    box-shadow:
      0 4px 6px -1px rgba(0, 0, 0, 0.1),
      0 2px 4px -1px rgba(0, 0, 0, 0.06);
  }
  to {
    box-shadow:
      0 20px 25px -5px rgba(0, 0, 0, 0.1),
      0 10px 10px -5px rgba(0, 0, 0, 0.04);
  }
}

.task-card-hover {
  transition: all var(--animation-duration-normal) var(--animation-easing);
}

.task-card-hover:hover {
  transform: translateY(-4px);
  animation: task-card-hover-shadow var(--animation-duration-normal)
    var(--animation-easing) forwards;
}

/* Button Animations */
@keyframes button-success {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
  }
}

.button-success-animation {
  animation: button-success 0.4s ease-out;
}

@keyframes spinner-rotate {
  from {
    transform: rotate(0deg);
  }
  to {
    transform: rotate(360deg);
  }
}

.loading-spinner {
  animation: spinner-rotate 1s linear infinite;
}

/* Task Status Change Animations */
@keyframes task-approval-success {
  0% {
    transform: scale(0.8);
    opacity: 0;
  }
  50% {
    transform: scale(1.1);
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.task-approved-animation {
  animation: task-approval-success 0.5s ease-out;
}

@keyframes task-rejection-shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-4px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(4px);
  }
}

.task-rejected-animation {
  animation: task-rejection-shake 0.5s ease-out;
}

/* Evidence Upload Animations */
@keyframes upload-progress {
  from {
    transform: scaleX(0);
    transform-origin: left;
  }
  to {
    transform: scaleX(1);
    transform-origin: left;
  }
}

.upload-progress-bar {
  animation: upload-progress 0.3s ease-out forwards;
}

@keyframes drop-zone-pulse {
  0%,
  100% {
    border-color: rgba(147, 51, 234, 0.5);
    background-color: rgba(147, 51, 234, 0.05);
  }
  50% {
    border-color: rgba(147, 51, 234, 0.8);
    background-color: rgba(147, 51, 234, 0.1);
  }
}

.drop-zone-active {
  animation: drop-zone-pulse 1.5s ease-in-out infinite;
}

.image-fade-in {
  animation: fadeIn var(--animation-duration-normal) ease-in;
}

@keyframes fadeIn {
  from {
    opacity: 0;
  }
  to {
    opacity: 1;
  }
}

/* Celebration Animations */
@keyframes confetti-fall {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.confetti-particle {
  animation: confetti-fall 3s linear forwards;
}

@keyframes trophy-bounce {
  0%,
  100% {
    transform: scale(1);
  }
  25% {
    transform: scale(1.1) rotate(-5deg);
  }
  50% {
    transform: scale(1.15);
  }
  75% {
    transform: scale(1.1) rotate(5deg);
  }
}

.trophy-celebration {
  animation: trophy-bounce 0.6s ease-out;
}

/* Empty State Animations */
@keyframes empty-state-float {
  0%,
  100% {
    transform: translateY(0);
  }
  50% {
    transform: translateY(-10px);
  }
}

.empty-state-animation {
  animation: empty-state-float 3s ease-in-out infinite;
}

@keyframes pulse-glow {
  0%,
  100% {
    opacity: 1;
    box-shadow: 0 0 5px rgba(147, 51, 234, 0.5);
  }
  50% {
    opacity: 0.8;
    box-shadow: 0 0 20px rgba(147, 51, 234, 0.8);
  }
}

.pulse-cta {
  animation: pulse-glow 2s ease-in-out infinite;
}

/* Status Badge Animations */
@keyframes badge-appear {
  from {
    transform: scale(0) rotate(-180deg);
    opacity: 0;
  }
  to {
    transform: scale(1) rotate(0deg);
    opacity: 1;
  }
}

.status-badge-appear {
  animation: badge-appear 0.4s cubic-bezier(0.68, -0.55, 0.265, 1.55);
}

/* Checkmark Animation */
@keyframes checkmark-draw {
  0% {
    stroke-dashoffset: 50;
  }
  100% {
    stroke-dashoffset: 0;
  }
}

.checkmark-animation {
  stroke-dasharray: 50;
  stroke-dashoffset: 50;
  animation: checkmark-draw 0.5s ease-out forwards;
}

/* Slide-in Notification */
@keyframes slide-in-right {
  from {
    transform: translateX(100%);
    opacity: 0;
  }
  to {
    transform: translateX(0);
    opacity: 1;
  }
}

.notification-slide-in {
  animation: slide-in-right var(--animation-duration-normal)
    var(--animation-easing);
}

/* =============================================
   === KEYHOLDER & RELATIONSHIPS ANIMATIONS  ===
   =============================================
*/

/* Relationship Card Animations */
@keyframes relationship-card-enter {
  from {
    opacity: 0;
    transform: translateY(20px) scale(0.95);
  }
  to {
    opacity: 1;
    transform: translateY(0) scale(1);
  }
}

@keyframes relationship-card-exit {
  from {
    opacity: 1;
    transform: scale(1);
  }
  to {
    opacity: 0;
    transform: scale(0.95);
  }
}

@keyframes relationship-card-hover-lift {
  0%,
  100% {
    transform: translateY(0);
    box-shadow:
      0 1px 3px rgba(0, 0, 0, 0.12),
      0 1px 2px rgba(0, 0, 0, 0.24);
  }
  50% {
    transform: translateY(-2px);
    box-shadow:
      0 4px 6px rgba(0, 0, 0, 0.16),
      0 3px 6px rgba(0, 0, 0, 0.23);
  }
}

/* Staggered animation for list items */
.relationship-card-enter {
  animation: relationship-card-enter var(--animation-duration-normal)
    var(--animation-easing);
  animation-fill-mode: backwards;
}

.relationship-card-enter:nth-child(1) {
  animation-delay: 0ms;
}
.relationship-card-enter:nth-child(2) {
  animation-delay: 50ms;
}
.relationship-card-enter:nth-child(3) {
  animation-delay: 100ms;
}
.relationship-card-enter:nth-child(4) {
  animation-delay: 150ms;
}
.relationship-card-enter:nth-child(5) {
  animation-delay: 200ms;
}

.relationship-card-exit {
  animation: relationship-card-exit var(--animation-duration-fast)
    var(--animation-easing);
}

/* Invitation Form Animations */
@keyframes invitation-expand {
  from {
    opacity: 0;
    max-height: 0;
    transform: scaleY(0.8);
    transform-origin: top;
  }
  to {
    opacity: 1;
    max-height: 500px;
    transform: scaleY(1);
  }
}

@keyframes invitation-collapse {
  from {
    opacity: 1;
    max-height: 500px;
    transform: scaleY(1);
  }
  to {
    opacity: 0;
    max-height: 0;
    transform: scaleY(0.8);
    transform-origin: top;
  }
}

.invitation-form-expand {
  animation: invitation-expand var(--animation-duration-normal)
    var(--animation-easing);
  overflow: hidden;
}

.invitation-form-collapse {
  animation: invitation-collapse var(--animation-duration-normal)
    var(--animation-easing);
  overflow: hidden;
}

/* Success/Error Feedback Animations */
@keyframes success-flash {
  0%,
  100% {
    background-color: transparent;
    transform: scale(1);
  }
  50% {
    background-color: rgba(16, 185, 129, 0.2);
    transform: scale(1.02);
  }
}

@keyframes error-shake {
  0%,
  100% {
    transform: translateX(0);
  }
  10%,
  30%,
  50%,
  70%,
  90% {
    transform: translateX(-5px);
  }
  20%,
  40%,
  60%,
  80% {
    transform: translateX(5px);
  }
}

.success-flash {
  animation: success-flash var(--animation-duration-slow)
    var(--animation-easing);
}

.error-shake {
  animation: error-shake 0.5s var(--animation-easing);
}

/* Loading Skeleton for Relationships */
@keyframes skeleton-pulse {
  0%,
  100% {
    opacity: 1;
  }
  50% {
    opacity: 0.5;
  }
}

@keyframes skeleton-shimmer {
  0% {
    background-position: -200% 0;
  }
  100% {
    background-position: 200% 0;
  }
}

.relationship-skeleton {
  background: linear-gradient(
    90deg,
    rgba(255, 255, 255, 0.05) 25%,
    rgba(255, 255, 255, 0.15) 50%,
    rgba(255, 255, 255, 0.05) 75%
  );
  background-size: 200% 100%;
  animation: skeleton-shimmer 1.5s ease-in-out infinite;
  border-radius: 0.5rem;
}

.relationship-skeleton-pulse {
  animation: skeleton-pulse 1.5s ease-in-out infinite;
}

/* Permission Toggle Animations */
@keyframes toggle-switch {
  0% {
    transform: translateX(0);
  }
  100% {
    transform: translateX(100%);
  }
}

@keyframes toggle-bg-transition {
  from {
    background-color: #6b7280;
  }
  to {
    background-color: #10b981;
  }
}

.toggle-switch-on {
  animation: toggle-switch var(--animation-duration-fast)
    var(--animation-easing);
}

/* Button Press Animation */
@keyframes button-press {
  0% {
    transform: scale(1);
  }
  50% {
    transform: scale(0.95);
  }
  100% {
    transform: scale(1);
  }
}

.button-press {
  animation: button-press var(--animation-duration-fast) var(--animation-easing);
}

/* Pending Request Badge Pulse */
@keyframes badge-pulse {
  0%,
  100% {
    opacity: 1;
    transform: scale(1);
  }
  50% {
    opacity: 0.8;
    transform: scale(1.05);
  }
}

.pending-badge-pulse {
  animation: badge-pulse 2s ease-in-out infinite;
}

/* Invite Code Display Animation */
@keyframes invite-code-appear {
  from {
    opacity: 0;
    transform: scale(0.9) rotateX(-10deg);
  }
  to {
    opacity: 1;
    transform: scale(1) rotateX(0);
  }
}

.invite-code-appear {
  animation: invite-code-appear var(--animation-duration-normal)
    var(--animation-easing);
  transform-style: preserve-3d;
}

/* Status Badge Transition */
@keyframes status-change {
  0% {
    transform: scale(1);
    opacity: 1;
  }
  50% {
    transform: scale(1.2);
    opacity: 0.7;
  }
  100% {
    transform: scale(1);
    opacity: 1;
  }
}

.status-badge-change {
  animation: status-change var(--animation-duration-normal)
    var(--animation-easing);
}

/* Micro-interactions */
.relationship-card-interactive {
  transition: all var(--animation-duration-fast) var(--animation-easing);
  will-change: transform, box-shadow;
}

.relationship-card-interactive:hover {
  transform: translateY(-2px);
  box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
}

.relationship-card-interactive:active {
  transform: translateY(0);
  box-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
}

/* Icon Button Hover */
.icon-button {
  transition: all var(--animation-duration-fast) var(--animation-easing);
  will-change: transform, background-color;
}

.icon-button:hover {
  transform: scale(1.1);
}

.icon-button:active {
  transform: scale(0.95);
}

/* Relationship Active Indicator */
@keyframes active-glow {
  0%,
  100% {
    box-shadow: 0 0 0 0 rgba(59, 130, 246, 0.7);
  }
  50% {
    box-shadow: 0 0 0 4px rgba(59, 130, 246, 0);
  }
}

.relationship-active-glow {
  animation: active-glow 2s ease-in-out infinite;
}

/* Smooth transitions for all relationship components */
.relationship-transition {
  transition: all var(--animation-duration-normal) var(--animation-easing);
}

.relationship-transition-fast {
  transition: all var(--animation-duration-fast) var(--animation-easing);
}

/* Accessibility: Respect prefers-reduced-motion */
@media (prefers-reduced-motion: reduce) {
  .task-card-hover:hover,
  .button-success-animation,
  .task-approved-animation,
  .task-rejected-animation,
  .upload-progress-bar,
  .drop-zone-active,
  .image-fade-in,
  .confetti-particle,
  .trophy-celebration,
  .empty-state-animation,
  .pulse-cta,
  .status-badge-appear,
  .checkmark-animation,
  .notification-slide-in,
  .relationship-card-enter,
  .relationship-card-exit,
  .relationship-card-hover-lift,
  .invitation-form-expand,
  .invitation-form-collapse,
  .success-flash,
  .error-shake,
  .relationship-skeleton,
  .relationship-skeleton-pulse,
  .toggle-switch-on,
  .button-press,
  .pending-badge-pulse,
  .invite-code-appear,
  .status-badge-change,
  .relationship-active-glow,
  .relationship-card-interactive:hover,
  .icon-button:hover {
    animation: none !important;
    transition: opacity var(--animation-duration-fast) ease !important;
  }

  .tracker-state-transition,
  .timer-pulse,
  .number-update,
  .tracker-glow-green,
  .tracker-glow-yellow,
  .milestone-celebration,
  .tracker-card-hover:hover,
  .focus-ring-animated:focus-visible,
  .modal-slide-in,
  .progress-fill-animated {
    animation: none !important;
    transition: opacity 0.2s !important;
    transform: none !important;
  }

  .loading-spinner {
    animation: spinner-rotate 1s linear infinite;
  }

  /* Keep shimmer for loading states as it's functional */
  .relationship-skeleton {
    animation: skeleton-shimmer 1.5s ease-in-out infinite;
  }

  .skeleton-shimmer {
    animation: none !important;
    background: rgba(215, 210, 234, 0.15);
  }
}

/* =============================================
   === EVENTS UI RESPONSIVE STYLES           ===
   =============================================
*/
/* Range slider touch-friendly styling */
input[type="range"] {
  -webkit-appearance: none;
  appearance: none;
  width: 100%;
  height: 44px;
  background: transparent;
  cursor: pointer;
}

/*noinspection ALL*/
input[type="range"]::-webkit-slider-track {
  width: 100%;
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

input[type="range"]::-webkit-slider-thumb {
  -webkit-appearance: none;
  appearance: none;
  height: 24px;
  width: 24px;
  border-radius: 50%;
  background: var(--color-accent-purple, #581c87);
  cursor: pointer;
  margin-top: -8px;
  transition: all 0.2s ease;
}

input[type="range"]::-webkit-slider-thumb:hover {
  transform: scale(1.1);
}

input[type="range"]::-webkit-slider-thumb:active {
  transform: scale(1.2);
}

input[type="range"]::-moz-range-track {
  width: 100%;
  height: 8px;
  background: rgba(255, 255, 255, 0.1);
  border-radius: 4px;
}

input[type="range"]::-moz-range-thumb {
  height: 24px;
  width: 24px;
  border: none;
  border-radius: 50%;
  background: var(--color-accent-purple, #581c87);
  cursor: pointer;
  transition: all 0.2s ease;
}

input[type="range"]::-moz-range-thumb:hover {
  transform: scale(1.1);
}

input[type="range"]::-moz-range-thumb:active {
  transform: scale(1.2);
}

/* Event form responsive adjustments */
@media (max-width: 640px) {
  .event-button {
    font-size: 0.875rem;
  }

  .event-form-field {
    font-size: 16px; /* Prevents iOS zoom */
  }
}

/* Event list responsive stagger animations */
@keyframes event-appear {
  from {
    opacity: 0;
    transform: translateY(10px);
  }
  to {
    opacity: 1;
    transform: translateY(0);
  }
}

.animate-event-appear {
  animation: event-appear 0.3s ease-out forwards;
}

@media (max-width: 640px) {
  .animate-event-appear {
    animation-duration: 0.2s; /* Faster on mobile */
  }
}

/* Milestone event glow animation */
@keyframes milestone-glow {
  0%,
  100% {
    box-shadow: 0 0 10px rgba(34, 197, 94, 0.3);
  }
  50% {
    box-shadow: 0 0 20px rgba(34, 197, 94, 0.5);
  }
}

.animate-milestone-glow {
  animation: milestone-glow 2s ease-in-out infinite;
}

/* Confetti animation for milestone events */
@keyframes confetti-fall {
  0% {
    transform: translateY(-100vh) rotate(0deg);
    opacity: 1;
  }
  100% {
    transform: translateY(100vh) rotate(720deg);
    opacity: 0;
  }
}

.confetti-particle {
  position: fixed;
  z-index: 9999;
  pointer-events: none;
  animation: confetti-fall linear forwards;
}

/* =============================================
   === EVENTS UI ACCESSIBILITY              ===
   =============================================
   Accessibility improvements for Events/Logging feature
   following WCAG 2.1 AA standards
*/

/* Enhanced focus indicators for event form controls */
.event-button:focus-visible,
.event-form-field:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Event type selector button focus with animation */
.event-button:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 3px;
  box-shadow: 0 0 0 6px rgba(88, 28, 135, 0.2);
  animation: focus-pulse 1.5s ease-in-out infinite;
}

@keyframes focus-pulse {
  0%,
  100% {
    box-shadow: 0 0 0 6px rgba(88, 28, 135, 0.2);
  }
  50% {
    box-shadow: 0 0 0 8px rgba(88, 28, 135, 0.3);
  }
}

/* High contrast mode support for events UI */
@media (prefers-contrast: more) {
  .event-button,
  .event-form-field,
  .event-item {
    border: 2px solid currentColor;
  }

  .event-button:focus-visible,
  .event-form-field:focus-visible {
    outline: 4px solid var(--color-focus-ring);
    outline-offset: 2px;
  }

  .event-item {
    border: 2px solid var(--color-border-accent);
  }
}

/* Reduced motion support for events UI */
@media (prefers-reduced-motion: reduce) {
  .event-button,
  .event-form-field,
  .event-item,
  .animate-event-appear,
  .animate-milestone-glow {
    animation-duration: 0.01ms !important;
    animation-iteration-count: 1 !important;
    transition-duration: 0.01ms !important;
  }

  .confetti-particle {
    display: none;
  }
}

/* Event list item accessibility improvements */
.event-item:focus-within {
  outline: 2px solid var(--color-focus-ring);
  outline-offset: 2px;
}

/* Ensure minimum touch targets for mobile */
@media (max-width: 640px) {
  .event-button,
  .event-form-field,
  button,
  [role="button"] {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Skip link styling */
a[href^="#"]:focus {
  position: absolute;
  z-index: 9999;
  top: 1rem;
  left: 1rem;
  padding: 1rem 1.5rem;
  background-color: var(--color-button-bg);
  color: var(--color-button-text);
  border-radius: 0.5rem;
  text-decoration: none;
  font-weight: 600;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
}

/* =============================================
   === ACHIEVEMENT UI ACCESSIBILITY          ===
   =============================================
   Accessibility improvements for Achievements feature
   following WCAG 2.1 AA standards
*/

/* Achievement card focus indicators */
[role="article"][tabindex="0"]:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 3px;
  border-radius: 8px;
  box-shadow: 0 0 0 6px rgba(88, 28, 135, 0.2);
}

/* Achievement pagination controls */
nav[aria-label*="pagination"] button:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(88, 28, 135, 0.2);
}

/* View toggle tab focus */
[role="tab"]:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(88, 28, 135, 0.3);
}

/* Leaderboard list items focus */
[role="list"] [role="listitem"]:focus-within {
  outline: 2px solid var(--color-focus-ring);
  outline-offset: 2px;
  border-radius: 8px;
}

/* Achievement filter controls */
[role="search"] input:focus-visible,
[role="search"] select:focus-visible {
  outline: 3px solid var(--color-focus-ring);
  outline-offset: 2px;
  box-shadow: 0 0 0 5px rgba(88, 28, 135, 0.2);
}

/* Progress bar accessibility - ensure visible focus */
[role="progressbar"]:focus-visible {
  outline: 2px solid var(--color-focus-ring);
  outline-offset: 2px;
  border-radius: 4px;
}

/* Achievement notification toast accessibility */
[role="status"][aria-live="assertive"] {
  /* Ensure notifications are announced by screen readers */
  position: relative;
  z-index: 1000;
}

/* High contrast mode for achievements */
@media (prefers-contrast: more) {
  [role="article"][tabindex="0"],
  [role="tab"],
  nav[aria-label*="pagination"] button {
    border: 2px solid currentColor;
  }

  [role="article"][tabindex="0"]:focus-visible,
  [role="tab"]:focus-visible,
  nav[aria-label*="pagination"] button:focus-visible {
    outline: 4px solid var(--color-focus-ring);
    outline-offset: 3px;
  }
  
  /* Ensure progress bars have high contrast */
  [role="progressbar"] {
    border: 2px solid currentColor;
  }
}

/* Reduced motion for achievements */
@media (prefers-reduced-motion: reduce) {
  [role="article"],
  [role="tab"],
  nav[aria-label*="pagination"] button {
    transition-duration: 0.01ms !important;
  }
  
  /* Keep progress bar animations minimal but functional */
  [role="progressbar"] > div {
    transition-duration: 0.2s !important;
  }
}

/* Ensure touch targets on mobile */
@media (max-width: 640px) {
  [role="tab"],
  nav[aria-label*="pagination"] button,
  [role="article"] button {
    min-height: 44px;
    min-width: 44px;
  }
}

/* Skip link for achievement gallery */
.skip-link[href^="#achievement"] {
  position: absolute;
  left: -9999px;
  z-index: 999;
  padding: 1rem 1.5rem;
  background-color: var(--color-button-bg);
  color: var(--color-button-text);
  border-radius: 0.5rem;
  text-decoration: none;
  font-weight: 600;
  box-shadow: 0 4px 6px rgba(0, 0, 0, 0.3);
  transition: left 0.2s ease;
}

.skip-link[href^="#achievement"]:focus {
  left: 1rem;
  top: 1rem;
}

